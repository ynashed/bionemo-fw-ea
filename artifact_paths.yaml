# This file specifies the source locations of pretrained models, and what
# the target locations to which they should be downloaded.
#
# The model source can be from either NGC (for internal nvidia + external customer use)
# or from SwiftStack (aka PBSS) for internal nvidia use.
#
# The download_models.py script requires the download directory be specified, but there
# are two extra parameters here that can further specify what to do with the downloaded file.
# "symlink" is used to specify if any symlinking operation needs to happen after download.
# "relative_download_dir" is used to specify the subdirectory to which the files should
# be downloaded.
# "extra_args" specifies any extra arguments that should be passed the ngc download or
# s3 download commands.

models:
    esm1nv:
        ngc: "nvidia/clara/esm1nv:1.0"
        pbss: "s3://bionemo-ci/models/esm1nv.nemo"
        symlink:
            source: "../../esm1nv.nemo"
            target: "protein/esm1nv/esm1nv.nemo"
    prott5nv:
        ngc: "nvidia/clara/prott5nv:1.0"
        pbss: "s3://bionemo-ci/models/prott5nv.nemo"
        symlink:
            source: "../../prott5nv.nemo"
            target: "protein/prott5nv/prott5nv.nemo"
    megamolbart:
        ngc: "nvidia/clara/megamolbart:1.0"
        pbss: "s3://bionemo-ci/models/megamolbart.nemo"
        symlink:
            source: "../../megamolbart.nemo"
            target: "molecule/megamolbart/megamolbart.nemo"
    molmim_70m_24_3:
        # TODO-REL: update ngc location before release
        # https://wandb.ai/clara-discovery/molmim_convergence_prod_March2024/runs/cOLZ4Eme
        ngc: null
        pbss: "s3://bionemo-ci/models/molmim_70m_24_3.nemo"
        symlink:
            source: "../../molmim_70m_24_3.nemo"
            target: "molecule/molmim/molmim_70m_24_3.nemo"
    equidock_dips:
        ngc: "nvidia/clara/equidock_dips:1.1"
        pbss: "s3://bionemo-ci/models/equidock_dips.nemo"
        symlink:
            source: "../../equidock_dips.nemo"
            target: "protein/equidock/equidock_dips.nemo"
    equidock_db5:
        ngc: "nvidia/clara/equidock_db5:1.1"
        pbss: "s3://bionemo-ci/models/equidock_db5.nemo"
        symlink:
            source: "../../equidock_db5.nemo"
            target: "protein/equidock/equidock_db5.nemo"
    diffdock_score:
        ngc: "nvidia/clara/diffdock_score:1.1"
        pbss: "s3://bionemo-ci/models/diffdock_score.nemo"
        symlink:
            source: "../../diffdock_score.nemo"
            target: "molecule/diffdock/diffdock_score.nemo"
    diffdock_confidence:
        ngc: "nvidia/clara/diffdock_confidence:1.1"
        pbss: "s3://bionemo-ci/models/diffdock_confidence.nemo"
        symlink:
            source: "../../diffdock_confidence.nemo"
            target: "molecule/diffdock/diffdock_confidence.nemo"
    esm2nv_650m:
        #TODO: update path when model is released
        ngc: "nvidia/clara/esm2nv650m:1.0"
        pbss: "s3://bionemo-ci/models/esm2nv_650M_converted.nemo"
        symlink:
            source: "../../esm2nv_650M_converted.nemo"
            target: "protein/esm2nv/esm2nv_650M_converted.nemo"
    esm2nv_3b:
        #TODO: update path when model is released
        ngc: "nvidia/clara/esm2nv3b:1.0"
        pbss: "s3://bionemo-ci/models/esm2nv_3B_converted.nemo"
        symlink:
            source: "../../esm2nv_3B_converted.nemo"
            target: "protein/esm2nv/esm2nv_3B_converted.nemo"
    openfold_initial_training_public: # DO NOT RELEASE
        ngc: "nvidian/cvai_bnmo_trng/openfold:openfold_initial_training_public_checkpoint"
        pbss: "s3://bionemo-ci/models/openfold_initial_training_public_checkpoint.nemo"
        symlink:
            source: "../../openfold_initial_training_public_checkpoint.nemo"
            target: "protein/openfold/openfold_initial_training_public_checkpoint.nemo"
    openfold_finetuning_4_public: # DO NOT RELEASE
        ngc: "nvidian/cvai_bnmo_trng/openfold:openfold_finetuning_4_public_checkpoint"
        pbss: "s3://bionemo-ci/models/openfold_finetuning_4_public_checkpoint.nemo"
        symlink:
            source: "../../openfold_finetuning_4_public_checkpoint.nemo"
            target: "protein/openfold/openfold_finetuning_4_public_checkpoint.nemo"
    openfold_initial_training_inhouse: # DO NOT RELEASE
        ngc: "nvidian/cvai_bnmo_trng/openfold:openfold_initial_training_inhouse_checkpoint"
        pbss: "s3://bionemo-ci/models/openfold_initial_training_inhouse_checkpoint.nemo"
        symlink:
            source: "../../openfold_initial_training_inhouse_checkpoint.nemo"
            target: "protein/openfold/openfold_initial_training_inhouse_checkpoint.nemo"
    openfold_finetuning_inhouse:
        ngc: "nvidian/cvai_bnmo_trng/openfold:openfold_finetuning_inhouse_checkpoint"
        pbss: "s3://bionemo-ci/models/openfold_finetuning_inhouse_checkpoint.nemo"
        symlink:
            source: "../../openfold_finetuning_inhouse_checkpoint.nemo"
            target: "protein/openfold/openfold_finetuning_inhouse_checkpoint.nemo"
    esm2_650m_huggingface:
        pbss: "s3://bionemo-ci/models/esm2-650M-huggingface"
        relative_download_dir: "protein/esm2nv/esm2-650M-huggingface"
        # Hugging face models are multiple files in a directory, so the recursive
        # flag is used to download everything in the dir.
        extra_args: "--recursive"
    esm2_3b_huggingface:
        pbss: "s3://bionemo-ci/models/esm2-3B-huggingface"
        relative_download_dir: "protein/esm2nv/esm2-3B-huggingface"
        # Hugging face models are multiple files in a directory, so the recursive
        # flag is used to download everything in the dir.
        extra_args: "--recursive"
    dnabert:
        pbss: "s3://bionemo-ci/models/dnabert-86M.nemo"
        symlink:
            source: "../../dnabert-86M.nemo"
            target: "dna/dnabert/dnabert-86M.nemo"
    geneformer_31M_240430:
        # A pretrained 9.2M parameter geneformer (BERT) on 31M single cells and a 21k tokens.
        #  this is our tokenizer that used ensg ids from medians (25k) to filter out missing ids from
        #  our regular set of human readable gene names (40k), bringing the total down to 21k tokens.
        # See https://wandb.ai/clara-discovery/scFM_v6/runs/1olz7ksb
        ngc: null
        pbss: "s3://bionemo-ci/models/geneformer-31M-240430-step-7000-wandb-1olz7ksb.nemo"
        symlink:
            source: "../../geneformer-31M-240430-step-7000-wandb-1olz7ksb.nemo"
            target: "singlecell/geneformer/geneformer-31M-240430.nemo"
    geneformer:
        # A QA model for geneformer with randomly initialized weights.
        pbss: "s3://bionemo-ci/models/geneformer-qa.nemo"
        symlink:
            source: "../../geneformer-qa.nemo"
            target: "singlecell/geneformer/geneformer-qa.nemo"
    enformer_finetuned16:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_finetuned16/0.1.0/enformer_finetuned16.nemo"
        ngc: "nvidian/clara-lifesciences/enformer_finetuned16:0.1.0"
        relative_download_dir: "dna/enformer/"
    enformer_finetuned32:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_finetuned32/0.1.0/enformer_finetuned32.nemo"
        ngc: "nvidian/clara-lifesciences/enformer_finetuned32:0.1.0"
        relative_download_dir: "dna/enformer/"
    enformer_pretrained16:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_pretrained16/0.1.0/enformer_pretrained16.nemo"
        ngc: "nvidian/clara-lifesciences/enformer_pretrained16:0.1.0"
        relative_download_dir: "dna/enformer/"
    enformer_pretrained32:
        pbss: "s3://bionemo-ci/models/dna/enformer/enformer_pretrained32/0.1.0/enformer_pretrained32.nemo"
        ngc: "nvidian/clara-lifesciences/enformer_pretrained32:0.1.0"
        relative_download_dir: "dna/enformer/"
